@model ProfileViewModel
@{
    ViewData["Title"] = "My Dashboard";
    Layout = "_ProfileLayout";
}

<div class="bg-gray-800 p-8 rounded-xl shadow-lg">
    <h3 class="text-2xl font-bold mb-6">Lifetime Stats</h3>
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
        <div class="stat-card p-6 rounded-lg">
            <p class="stat-number" data-target="12">0</p>
            <p class="text-gray-400 mt-2">Tickets Purchased</p>
        </div>
        <div class="stat-card p-6 rounded-lg">
            <p class="stat-number" data-target="4">0</p>
            <p class="text-gray-400 mt-2">Reviews Written</p>
        </div>
        <div class="stat-card p-6 rounded-lg">
            <p class="stat-number" data-target="8">0</p>
            <p class="text-gray-400 mt-2">Movies Favorited</p>
        </div>
    </div>
</div>

@section PageScripts {
    <script>
        function animateValue(obj, start, end, duration) {
            let startTimestamp = null;
            const step = (timestamp) => {
                if (!startTimestamp) startTimestamp = timestamp;
                const progress = Math.min((timestamp - startTimestamp) / duration, 1);
                obj.innerHTML = Math.floor(progress * (end - start) + start);
                if (progress < 1) {
                    window.requestAnimationFrame(step);
                }
            };
            window.requestAnimationFrame(step);
        }
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    const statNumber = entry.target;
                    const target = +statNumber.getAttribute('data-target');
                    animateValue(statNumber, 0, target, 1500);
                    observer.unobserve(statNumber);
                }
            });
        }, { threshold: 0.5 });
        document.querySelectorAll('.stat-number').forEach(num => {
            observer.observe(num);
        });
    </script>
}